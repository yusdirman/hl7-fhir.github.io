{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "id": "http://hl7.org/fhir/json-schema/Subscription",
  "$ref": "#/definitions/Subscription",
  "description": "see http://hl7.org/fhir/json.html#schema for information about the FHIR Json Schemas",
  "definitions": {
    "Subscription": {
      "allOf": [
        {
          "$ref": "DomainResource.schema.json/definitions/DomainResource"
        },
        {
          "description": "The subscription resource is used to define a push based subscription from a server to another system. Once a subscription is registered with the server, the server checks every resource that is created or updated, and if the resource matches the given criteria, it sends a message on the defined \"channel\" so that another system is able to take an appropriate action.",
          "properties": {
            "resourceType": {
              "description": "This is a Subscription resource",
              "type": "string",
              "enum": [
                "Subscription"
              ]
            },
            "criteria": {
              "description": "The rules that the server should use to determine when to generate notifications for this subscription.",
              "type": "string"
            },
            "criteria_": {
              "description": "Extensions for criteria",
              "$ref": "Element.schema.json/definitions/Element"
            },
            "contact": {
              "description": "Contact details for a human to contact about the subscription. The primary use of this for system administrator troubleshooting.",
              "type": "array",
              "items": {
                "$ref": "ContactPoint.schema.json/definitions/ContactPoint"
              }
            },
            "reason": {
              "description": "A description of why this subscription is defined.",
              "type": "string"
            },
            "reason_": {
              "description": "Extensions for reason",
              "$ref": "Element.schema.json/definitions/Element"
            },
            "status": {
              "description": "The status of the subscription, which marks the server state for managing the subscription.",
              "type": "string",
              "pattern": "[^\\s]+([\\s]?[^\\s]+)*"
            },
            "status_": {
              "description": "Extensions for status",
              "$ref": "Element.schema.json/definitions/Element"
            },
            "error": {
              "description": "A record of the last error that occurred when the server processed a notification.",
              "type": "string"
            },
            "error_": {
              "description": "Extensions for error",
              "$ref": "Element.schema.json/definitions/Element"
            },
            "channel": {
              "description": "Details where to send notifications when resources are received that meet the criteria.",
              "$ref": "#/definitions/Subscription.Channel"
            },
            "end": {
              "description": "The time for the server to turn the subscription off.",
              "type": "string"
            },
            "end_": {
              "description": "Extensions for end",
              "$ref": "Element.schema.json/definitions/Element"
            },
            "tag": {
              "description": "A tag to add to any resource that matches the criteria, after the subscription is processed.",
              "type": "array",
              "items": {
                "$ref": "Coding.schema.json/definitions/Coding"
              }
            }
          },
          "required": [
            "channel",
            "resourceType"
          ]
        }
      ]
    },
    "Subscription.Channel": {
      "allOf": [
        {
          "$ref": "BackboneElement.schema.json/definitions/BackboneElement"
        },
        {
          "description": "The subscription resource is used to define a push based subscription from a server to another system. Once a subscription is registered with the server, the server checks every resource that is created or updated, and if the resource matches the given criteria, it sends a message on the defined \"channel\" so that another system is able to take an appropriate action.",
          "properties": {
            "type": {
              "description": "The type of channel to send notifications on.",
              "type": "string",
              "pattern": "[^\\s]+([\\s]?[^\\s]+)*"
            },
            "type_": {
              "description": "Extensions for type",
              "$ref": "Element.schema.json/definitions/Element"
            },
            "endpoint": {
              "description": "The uri that describes the actual end-point to send messages to.",
              "type": "string"
            },
            "endpoint_": {
              "description": "Extensions for endpoint",
              "$ref": "Element.schema.json/definitions/Element"
            },
            "payload": {
              "description": "The mime type to send the payload in - either application/xml+fhir, or application/json+fhir. If the mime type is blank, then there is no payload in the notification, just a notification.",
              "type": "string"
            },
            "payload_": {
              "description": "Extensions for payload",
              "$ref": "Element.schema.json/definitions/Element"
            },
            "header": {
              "description": "Additional headers / information to send as part of the notification.",
              "type": "string"
            },
            "header_": {
              "description": "Extensions for header",
              "$ref": "Element.schema.json/definitions/Element"
            }
          }
        }
      ]
    }
  }
}