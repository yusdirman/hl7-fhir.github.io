<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
  <title>Operations - FHIR v1.4.0</title>

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="author" content="http://hl7.org/fhir"/>

  <link rel="stylesheet" href="fhir.css"/>
  <link rel="Prev" href="http://hl7.org/fhir/operations.html"/>

    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="./dist/css/bootstrap.css"/>
  <link rel="stylesheet" href="./assets/css/bootstrap-fhir.css"/>

    <!-- Project extras -->
  <link rel="stylesheet" href="./assets/css/project.css"/>
  <link rel="stylesheet" href="./assets/css/pygments-manni.css"/>
	<link rel="stylesheet" href="jquery-ui.css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- [if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond.min.js"></script>
  <![endif] -->

    <!-- Favicons -->
  <link sizes="144x144" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-144-precomposed.png"/>
  <link sizes="114x114" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-114-precomposed.png"/>
  <link sizes="72x72" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="./assets/ico/favicon.png"/>

</head>
<body>
	<div id="segment-header" class="segment">  <!-- segment-header -->	
		<div class="container">  <!-- container -->
			<a no-external="true" id="logo" href="http://hl7.org/fhir"><img src="./assets/images/fhir-logo-www.png" alt="logo fhir"/> </a>
			<div id="hl7-status">
				<b>Current Build</b>
			</div>       	
			
			<div id="hl7-nav">
				 <a no-external="true" id="hl7-logo" href="http://www.hl7.org">
					<img src="./assets/images/hl7-logo.png" width="42" alt="visit the hl7 website" height="50"/>
				</a> 
			</div>       	
			<div id="hl7-nav"><a no-external="true" id="hl7-logo" href="http://hl7.org/fhir/search.cfm"><img src="./assets/images/search.png" alt="Search FHIR"/></a></div> 
		</div>
		<div class="container">  <!-- container -->
	</div></div>  <!-- /segment-header -->	


	<div id="segment-navbar" class="segment">  <!-- segment-navbar -->
		<div id="stripe"> </div>
		<div class="container">  <!-- container -->
   <!-- HEADER CONTENT -->
 	      		
 	      		      		
			<nav class="navbar navbar-inverse">
				<div class="container">
					<button data-target=".navbar-inverse-collapse" data-toggle="collapse" type="button" class="navbar-toggle">
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
						<span class="icon-bar"> </span>
					</button>
					<a href="index.html" class="navbar-brand hidden">FHIR</a>
					<div class="nav-collapse collapse navbar-inverse-collapse">
						<ul class="nav navbar-nav">
              <li><a href="index.html">Home</a></li>
              <li><a href="documentation.html">Documentation</a></li>
              <li><a href="implementation.html">Implementation</a></li>
              <li><a href="resourcelist.html">Resources</a></li>
              <li><a href="clinical.html">Clinical</a></li>
              <li><a href="administration.html">Administrative</a></li>
              <li><a href="infrastructure.html">Infrastructure</a></li>
              <li><a href="financial.html">Financial</a></li>

						</ul>
					</div>  <!-- /.nav-collapse -->
				</div>  <!-- /.container -->
			</nav>  <!-- /.navbar -->
      		
				
  <!-- /HEADER CONTENT -->				
		</div>  <!-- /container -->
	</div>  <!-- /segment-navbar -->
	

	<div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
		<div class="container">  <!-- container -->	
			<ul class="breadcrumb">
        <li><a href="index.html">Home</a></li>
        <li><a href="implementation.html">Implementation</a></li>
        <li><b>Operations</b></li>          <!-- operations.html / page / -->

			</ul>	
		</div>  <!-- /container -->
	</div>  <!-- /segment-breadcrumb -->
	

	<div id="segment-content" class="segment">  <!-- segment-content -->
	<div class="container">  <!-- container -->
            <div class="row">
            	<div class="inner-wrapper">
  <!-- CONTENT CONTENT -->


<div class="col-9">

<a name="base"> </a>
<h2><span class="sectioncount">2.2.0<a name="2.2.0"> </a></span> Extended Operations on the RESTful API <a href="operations.html#2.2.0" title="link to here" class="self-link"><img src="target.png"/></a></h2>
<table class="cols"><tr><td id="wg"><a href="http://www.hl7.org/Special/committees/fiwg/index.cfm" _target="blank">FHIR Infrastructure <img src="external.png" style="text-align: baseline"/></a> Work Group</td><td id="fmm"><a href="resource.html#maturity">Maturity Level</a>: N/A</td><td id="ballot"><a href="help.html#status">Ballot Status</a>: <a href="history.html#pubs">DSTU 2</a></td></tr></table>

<p>
The <a href="http.html">RESTful API</a> defines a set of common interactions (read, update, search, etc.)
performed on a repository of typed resources. These interactions follow
the RESTful paradigm of managing state by <b>C</b>reate/<b>R</b>ead/<b>U</b>pdate/<b>D</b>elete actions on a set of identified
resources. While this approach solves many use cases, there is some specific
functionality that can be met more efficiently using an RPC-like paradigm,
where named operations are performed with inputs and outputs (<b>E</b>xecute). Operations are used (a) where the server
needs to play an active role in formulating the content of the response, not merely return existing
information, or (b)where the intended purpose is to cause side effects such as the modification of existing
resources, or creation of new resources. This specification describes a lightweight operation framework that
seamlessly extends the RESTful API.
</p>
<p>
Operations have the following general properties:
</p>
<ul>
 <li>Each operation has a name</li>
 <li>Each operation has a list of 'in' and 'out' parameters</li>
 <li>Parameters are either resources, data types or search parameters</li>
 <li>Operations are subject to the same security constraints and requirements as the RESTful API</li>
 <li>The URIs for the operation end-points are based on the existing RESTful API address scheme</li>
 <li>Operations may make use of the existing repository of resources in their definitions</li>
 <li>Operations may be performed on a specific resource, a resource type, or a whole system</li>
</ul>

<a name="executing"> </a>
<h3><span class="sectioncount">2.2.0.1</span> Executing an Operation <a href="operations.html#executing" title="link to here" class="self-link"><img src="target.png"/></a></h3>

<p>
Operations are executed using a URL derived from the FHIR endpoint, where the name of the operations is prefixed by a &quot;dollar sign&quot; ('$') character. For example:
</p>
<pre>
 POST http://fhir.someserver.org/fhir/Patient/1/$everything
</pre>
<p>
When an operation is idempotent, and the parameters are all simple ones 
(as is the case with the example above), it may be invoked using GET as well.
</p>
<p>
Operations can be invoked on four types of FHIR endpoints:
</p>
<ul>
 <li>The &quot;base&quot; FHIR service endpoint (e.g. http://fhir.someserver.org/fhir): These are operations that operate on the full scale of the server. For example, &quot;return me all extensions known by this server&quot;</li>
 <li>A Resource type (e.g. http://fhir.someserver.org/fhir/Patient): These are operations that operate across all instances of a given resource type</li>
 <li>A Resource instance (e.g. http://fhir.someserver.org/fhir/Patient/1): These are operations that involve only a single instance of a Resource, like the $everything operation above does</li>
 <li>A specific version of a resource instance (http://fhir.someserver.org/fhir/Patient/1/_history/4): These operations involve only a specific version of a single instance of a FHIR Resource and exists only to allow manipulation of profile and tag metadata of past versions</li>
</ul>
<p>
The body of the invocation contains a special infrastructure resource called <a href="parameters.html">Parameters</a>,
which represents a collection of named parameters as &lt;key,value&gt; pairs, where the value may be any 
primitive or complex datatype or even a full Resource. It may also include strings 
formatted as search parameter types.
</p>
<p>
Upon completion, the operation returns another <code>Parameters</code> resource, containing one or 
more output parameters. This means that a FHIR operation can take a set of zero or more parameters <i>in</i> and return a set of zero or more 
result parameters <i>out</i>. Both the body of the POST and the returned result are always a Resource. 
</p>
<p>
Some Operations with primitive input types and a single Resource output parameter named '<code>return</code>' can be invoked using a GET directly, with parameters as HTTP URL parameters. 
In this case, the response is simply the resource that is the return value, with no Parameters resource. These kinds of usage are discussed further below.
</p>

<a name="defined"> </a>
<h3><span class="sectioncount">2.2.0.2</span> FHIR defined Operations <a href="operations.html#defined" title="link to here" class="self-link"><img src="target.png"/></a></h3>
<p>
This specification defines several operations:
</p>
<table class="grid"> <tr><td colspan="2"><b>Base Operations (All resource types)</b></td></tr>
<tr><td><a href="resource-operations.html#validate">Validate a resource</a></td><td>[base]/[Resource]/$validate | [base]/[Resource]/[id]/$validate</td></tr><tr><td><a href="resource-operations.html#meta">Access a list of profiles, tags, and security labels</a></td><td>[base]/$meta | [base]/[Resource]/$meta | [base]/[Resource]/[id]/$meta</td></tr><tr><td><a href="resource-operations.html#meta-add">Add profiles, tags, and security labels to a resource</a></td><td>[base]/[Resource]/[id]/$meta-add</td></tr><tr><td><a href="resource-operations.html#meta-delete">Delete profiles, tags, and security labels for a resource</a></td><td>[base]/[Resource]/[id]/$meta-delete</td></tr><tr><td><a href="resource-operations.html#cds-hook">The CDS Hook operation is the core API request for CDS Hooks</a></td><td>[base]/$cds-hook</td></tr> <tr><td colspan="2"><b>Operations Defined by Resource Types</b></td></tr>
<tr><td><a href="codesystem-operations.html#lookup">Concept Look Up</a></td><td>[base]/CodeSystem/$lookup</td></tr><tr><td><a href="codesystem-operations.html#subsumes">Subsumption Testing</a></td><td>[base]/CodeSystem/$subsumes | [base]/CodeSystem/[id]/$subsumes</td></tr><tr><td><a href="codesystem-operations.html#infer">Performing inferencing based on a set of codes - e.g. a mix of composition and decomposition</a></td><td>[base]/CodeSystem/$infer | [base]/CodeSystem/[id]/$infer</td></tr><tr><td><a href="composition-operations.html#document">Generate a Document</a></td><td>[base]/Composition/$document | [base]/Composition/[id]/$document</td></tr><tr><td><a href="conceptmap-operations.html#translate">Concept Translation</a></td><td>[base]/ConceptMap/$translate | [base]/ConceptMap/[id]/$translate</td></tr><tr><td><a href="conceptmap-operations.html#closure">Closure Table Maintenance</a></td><td>[base]/$closure</td></tr><tr><td><a href="decisionsupportrule-operations.html#evaluate">Evaluate</a></td><td>[base]/DecisionSupportRule/[id]/$evaluate</td></tr><tr><td><a href="decisionsupportservicemodule-operations.html#evaluate">Evaluate</a></td><td>[base]/DecisionSupportServiceModule/[id]/$evaluate</td></tr><tr><td><a href="encounter-operations.html#everything">Fetch Encounter Record</a></td><td>[base]/Encounter/[id]/$everything</td></tr><tr><td><a href="list-operations.html#find">Find a functional list</a></td><td>[base]/List/$find</td></tr><tr><td><a href="measure-operations.html#evaluate-measure">Evaluate Measure</a></td><td>[base]/Measure/$evaluate-measure | [base]/Measure/[id]/$evaluate-measure</td></tr><tr><td><a href="messageheader-operations.html#process-message">Process Message</a></td><td>[base]/$process-message</td></tr><tr><td><a href="observation-operations.html#stats">Observation Statistics</a></td><td>[base]/Observation/$stats | [base]/Observation/[id]/$stats</td></tr><tr><td><a href="orderset-operations.html#place">Place</a></td><td>[base]/OrderSet/[id]/$place</td></tr><tr><td><a href="patient-operations.html#match">Find patient matches using MPI based logic</a></td><td>[base]/Patient/$match</td></tr><tr><td><a href="patient-operations.html#everything">Fetch Patient Record</a></td><td>[base]/Patient/$everything | [base]/Patient/[id]/$everything</td></tr><tr><td><a href="questionnaire-operations.html#populate">Populate Questionnaire</a></td><td>[base]/Questionnaire/$populate | [base]/Questionnaire/[id]/$populate</td></tr><tr><td><a href="structuredefinition-operations.html#questionnaire">Build Questionnaire</a></td><td>[base]/StructureDefinition/$questionnaire | [base]/StructureDefinition/[id]/$questionnaire</td></tr><tr><td><a href="structuremap-operations.html#transform">Model Instance Transformation</a></td><td>[base]/StructureMap/$transform | [base]/StructureMap/[id]/$transform</td></tr><tr><td><a href="task-operations.html#reserve">Reserve Task</a></td><td>[base]/Task/[id]/$reserve</td></tr><tr><td><a href="task-operations.html#start">Start Task</a></td><td>[base]/Task/[id]/$start</td></tr><tr><td><a href="task-operations.html#finish">Finish Task</a></td><td>[base]/Task/[id]/$finish</td></tr><tr><td><a href="task-operations.html#fail">Fail Task</a></td><td>[base]/Task/[id]/$fail</td></tr><tr><td><a href="task-operations.html#release">Release Task</a></td><td>[base]/Task/[id]/$release</td></tr><tr><td><a href="task-operations.html#suspend">Suspend Task</a></td><td>[base]/Task/[id]/$suspend</td></tr><tr><td><a href="task-operations.html#resume">Resume Task</a></td><td>[base]/Task/[id]/$resume</td></tr><tr><td><a href="task-operations.html#cancel">Cancel Task</a></td><td>[base]/Task/[id]/$cancel</td></tr><tr><td><a href="task-operations.html#stop">Stop Task</a></td><td>[base]/Task/[id]/$stop</td></tr><tr><td><a href="task-operations.html#set-input">Set Task Input</a></td><td>[base]/Task/[id]/$set-input</td></tr><tr><td><a href="task-operations.html#set-output">Set Task Output</a></td><td>[base]/Task/[id]/$set-output</td></tr><tr><td><a href="valueset-operations.html#expand">Value Set Expansion</a></td><td>[base]/ValueSet/$expand | [base]/ValueSet/[id]/$expand</td></tr><tr><td><a href="valueset-operations.html#validate-code">Value Set based Validation</a></td><td>[base]/ValueSet/$validate-code | [base]/ValueSet/[id]/$validate-code</td></tr> <tr><td colspan="2"><b>Operations Defined by Implementation Guides</b></td></tr>
</table>
<p>
Notes:
</p>
<ul>
 <li>The special operations on the <code>meta</code> element also operate on previous versions of a resource (/_history/).  They are the only operations that can manipulate versions other than the &quot;current&quot; version.</li>
</ul>

<a name="extensibility"> </a>
<h3><span class="sectioncount">2.2.0.3</span> Implementation Defined Operations <a href="operations.html#extensibility" title="link to here" class="self-link"><img src="target.png"/></a></h3>
<p>
Implementations are able to define their own operations in addition to
those defined here. Name clashes between operations defined
by different implementers can be resolved by the use of the server's
<a href="conformance.html">Conformance statement</a>.
</p>
<p>
Also, the definition of these or additional run time operations does not
prevent the use of other kinds of operations that are not dependent on and/or not integrated
with the RESTful API, provided that their addressing scheme does not clash with the scheme
defined here.
</p>

<a name="defining"> </a>
<h3><span class="sectioncount">2.2.0.4</span> Defining an Operation <a href="operations.html#defining" title="link to here" class="self-link"><img src="target.png"/></a></h3>

<p>
Each Operation is defined by:
</p>
<ul>
 <li>A context for the Operation - <i>system</i>, <i>resource type</i>, or <i>resource instance</i></li>
 <li>A name for the Operation</li>
 <li>A list of parameters along with their definitions</li>
</ul>

<p>
For each parameter, the following information is needed:
</p>
<ul>
 <li>Name - the name of the parameter. For implementer convenience, the name should be a valid token (see below)</li>
 <li>Use - In | Out | Both</li>
 <li>Type - a data type or a Resource type</li>
 <li>Profile - a <a href="structuredefinition.html">StructureDefinition</a> that applies additional restrictions about the resource</li>
 <li>Documentation - a description of the parameter's use</li>
 <li>(Optional) Search Type - if the type is a string, and the parameter is being used like a search parameter, which kind of search type applies</li>
</ul>
<p>
There is a special parameter type called &quot;Tuple&quot; which is a parameter type that has additional
parts. Each part has the same information as a parameter, except for use, which is taken from
the parameter it is part of.
</p>

<p>
The resource <a href="operationdefinition.html">Operation Definition</a> is used to provide a computable definition
of the Operation.
</p>

<a name="extending"> </a>
<h3><span class="sectioncount">2.2.0.5</span> Extending an Operation <a href="operations.html#extending" title="link to here" class="self-link"><img src="target.png"/></a></h3>
<p>
Implementations are able to extend an operation by defining new named parameters.
Implementations can publish their own extended definitions using the
 <a href="operationdefinition.html">Operation Definition</a> resource, and
this variant definition can use OperationDefinition.base to refer to the
underlying definition.
</p>
<p>
Note that the FHIR specification will never define any parameter names starting with &quot;x-&quot;.
</p>

<a name="executing"> </a>
<a name="synchronous"> </a>

<h3><span class="sectioncount">2.2.0.6</span> Executing an Operation Synchronously <a href="operations.html#synchronous" title="link to here" class="self-link"><img src="target.png"/></a></h3>

<p>
Operations are typically executed synchronously: a client sends a request
to a server that includes the operation's <i>in</i> parameters and the server replies with the
operation's <i>out</i> parameters.
</p>

<p>
The URL for an operation end-point depends on its context:
</p>
<ul>
 <li>system: the URL is [base]/$[name]</li>
 <li>resource type: the URL is [base]/[type]/$[name]</li>
 <li>resource instance: the URL is [base]/[type]/[id]/$[name]</li>
</ul>

<a name="request"> </a>
<h4><span class="sectioncount">2.2.0.6.1</span> Operation Request <a href="operations.html#request" title="link to here" class="self-link"><img src="target.png"/></a></h4>

<p>
An operation is generally invoked by performing an HTTP POST to the operation's end-point.
The submitted content is the special <a href="parameters.html">Parameters</a> format (the &quot;in&quot; parameters) - a list of named parameters. For an example, see <a href="op-example-request.html">the value set expansion request example</a>.
</p>
<p>
Note that the same arrangement as for the RESTful interface applies
with respect to <a href="http.html#mime-type">content types</a>.
</p>
<p>
If there are all the parameters for the operation are <a href="datatypes.html#primitive">primitive types</a>, and the operation
is <i>idempotent</i> (see <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">HTTP specification
definition of idempotent <img src="external.png" style="text-align: baseline"/></a>), the operation may be invoked by performing an HTTP GET operation where
all of the values of the parameters are appended to the URL in the search portion of the URL (e.g. after the '?' character).
Servers SHALL support this method of invocation.
</p>
<p>
If the only parameter to the operation is a resource, then the operation can also executed 
by a POST with that parameter as the body of the request.
</p>

<p>
Servers MAY choose to support submission of the parameters <i>multi-part/form-data</i> method as well,
which can be useful when testing an operation using HTML forms.
</p>

<a name="response"> </a>

<h4><span class="sectioncount">2.2.0.6.2</span> Operation Response <a href="operations.html#response" title="link to here" class="self-link"><img src="target.png"/></a></h4>

<p>
If an operation succeeds, an HTTP Status code of 200 OK is returned. An
HTTP status code of 4xx or 5xx indicates an error, and an
<a href="operationoutcome.html">OperationOutcome</a> may be returned.
User agents should note that servers may issue redirects, etc. to
authenticate the client in response to an operation request.
</p>

<p>
In general, an operation response uses the same
<a href="parameters.html">Parameters</a> format whether there is only one or 
there are multiple named <i>out</i> parameters.
</p>
<p>
If there is only one <i>out</i> parameter, which is a Resource with the parameter name
&quot;return&quot; then the parameter format is
not used, and the response is simply the resource itself.
</p>
<p>
The resources that are returned by the operation may be
retained and made available in the resource repository
on the operation server. In that case, the server will
provide the identity of the resource in the returned resources. When
resources that are not persisted are returned in the response,
they will have no <code>id</code> property.
</p>

<a name="asynchronous"> </a>

<h3><span class="sectioncount">2.2.0.7</span> Executing an Operation Asynchronously <a href="operations.html#asynchronous" title="link to here" class="self-link"><img src="target.png"/></a></h3>

<blockquote class="dstu-note">
<a name="dstu"> </a>
<p>
<b>DSTU Note:</b> there is presently no mechanism to execute
operations asynchronously in a RESTful manner. However, the <a href="messaging.html#operations">messaging page</a>
describes a way to execute operations asynchronously using messages.
</p>
<p>
Provide feedback/discussion <a href="http://wiki.hl7.org/index.php?title=FHIR_Asynchronous_Exchange">here <img src="external.png" style="text-align: baseline"/></a>.
</p>
</blockquote>
</div>


				</div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->
        
    </div>  <!-- /segment-content -->


	<div id="segment-footer" class="segment">  <!-- segment-footer -->
		<div class="container">  <!-- container -->
			<div class="inner-wrapper">
				<p>
        &copy; HL7.org 2011+. FHIR STU3 Candidate (v1.4.0-8453) generated on Mon, Jun 6, 2016 20:22+0000. <a href="qa.html">QA Page</a>
        <br/>
        <span style="color: #FFFF77">
        Links: <a style="color: #81BEF7" href="http://hl7.org/fhir/search.cfm">Search <img src="external.png" style="text-align: baseline"/></a> | 
               <a style="color: #81BEF7" href="history.html">Version History</a> | 
               <a style="color: #81BEF7" href="toc.html">Table of Contents</a> | 
               <a style="color: #81BEF7" href="http://services.w3.org/htmldiff?doc1=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Foperations.html&amp;doc2=http%3A%2F%2Fhl7-fhir.github.io%2F%2Foperations.html">Compare to DSTU2 <img src="external.png" style="text-align: baseline"/></a> |                
               <a rel="license" style="color: #81BEF7" href="license.html"><img src="cc0.png" alt="CC0" style="border-style: none;"/></a> | 
               <a style="color: #81BEF7" href="http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemAdd&amp;tracker_id=677" target="_blank">Propose a change <img src="external.png" style="text-align: baseline"/></a>   
        </span>
        </p>
			</div>  <!-- /inner-wrapper -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-footer -->
  <!-- disqus thread -->
  <!-- disqus -->
  <!-- end disqus -->        
	
	<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
		<div class="container">  <!-- container -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-post-footer -->
    
      <!-- JS and analytics only. -->
      <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
<script src="./assets/js/jquery.js"> </script>     <!-- note keep space here, otherwise it will be transformed to empty tag -> fails -->
<script src="./dist/js/bootstrap.min.js"> </script>
<script src="./assets/js/respond.min.js"> </script>

<script src="./assets/js/fhir.js"> </script>

  <!-- Analytics Below
================================================== -->

</body>
</html>